{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\richk\\\\Documents\\\\GitHub\\\\LetsMeet\\\\client\\\\src\\\\user\\\\home\\\\groups\\\\currentGroups\\\\meetings\\\\indivMeetingAdmin.js\",\n    _s = $RefreshSig$();\n\nimport { useState } from 'react';\nimport CanvasJSReact from \"./canvasjs-3.7/canvasjs.react\";\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst IndivMeetingAdmin = props => {\n  _s();\n\n  var CanvasJS = CanvasJSReact.CanvasJS;\n  var CanvasJSChart = CanvasJSReact.CanvasJSChart;\n  const details = props.meeting;\n  const startDate = new Date(props.meeting.range[0].split(\"T\")[0].replaceAll('-', '/'));\n  const endDate = new Date(props.meeting.range[1].split(\"T\")[0].replaceAll('-', '/'));\n  const startString = props.meeting.timeRangeStart.split(\":\");\n  const endString = props.meeting.timeRangeEnd.split(\":\");\n  const startTime = parseInt(startString[0]) + (startString[1] !== \"0\" && 0.5);\n  const endTime = parseInt(endString[0]) + (endString[1] !== \"0\" && 0.5);\n  const [showData, setShowData] = useState(true);\n\n  const slotToTime = slot => {\n    const time = slot.split(\"-\");\n    time[0] = parseInt(time[0]) + startTime * 2;\n    time[1] = parseInt(time[1]);\n    const date = new Date(startDate);\n    date.setDate(date.getDate() + time[1]);\n    date.setTime(date.getTime() + time[0] * 30 * 60 * 1000);\n    return date;\n  };\n\n  const fetchSubmission = () => {\n    const submissionMap = new Map();\n    let current = new Date(startDate);\n\n    while (current.getTime() <= endDate.getTime()) {\n      submissionMap.set(`${current.toLocaleDateString().substring(0, current.toLocaleDateString().lastIndexOf(\"/\"))}A`, 0);\n      submissionMap.set(`${current.toLocaleDateString().substring(0, current.toLocaleDateString().lastIndexOf(\"/\"))}B`, 0);\n      current.setDate(current.getDate() + 1);\n    }\n\n    const middleTime = startTime < endTime ? (startTime + endTime) / 2 : (startTime + (endTime + 24 - startTime) / 2) % 24;\n    const allSlots = [];\n    const uploads = details.haveUploaded;\n\n    for (const upload of uploads) {\n      for (const slot of upload.slots) allSlots.push(slotToTime(slot));\n    }\n\n    for (const date of allSlots) {\n      let dateString = `${date.toLocaleDateString().substring(0, date.toLocaleDateString().lastIndexOf(\"/\"))}`;\n      if (date.getHours() < middleTime) submissionMap.set(`${dateString}A`, submissionMap.get(`${dateString}A`) + 1);else submissionMap.set(`${dateString}B`, submissionMap.get(`${dateString}B`) + 1);\n    }\n\n    return submissionMap;\n  };\n\n  const submissionsMap = fetchSubmission();\n\n  const createUsersDisplay = uploaded => {\n    const usersList = uploaded ? props.meeting.haveUploaded : props.meeting.haveNotUploaded;\n    return usersList.map(user => {\n      const email = user.user ? user.user : user;\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        children: email\n      }, email, false, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 17\n      }, this);\n    });\n  };\n\n  const slotSubmissionDisplay = () => {\n    const middleTime = startTime < endTime ? (startTime + endTime) / 2 : (startTime + (endTime + 24 - startTime) / 2) % 24;\n    const data = [];\n\n    for (const submission of submissionsMap) {\n      const value = submission[0].charAt(submission[0].length - 1);\n      submission[0] = submission[0].substring(0, submission[0].length - 1);\n      const slot = value === \"A\" ? submission[0] + ` -- ${decimalToTime(startTime)}~${decimalToTime(middleTime)}` : submission[0] + ` -- ${decimalToTime(middleTime)}~${decimalToTime(endTime)}`;\n      data.push({\n        label: slot,\n        y: submission[1]\n      });\n    }\n\n    const options = {\n      title: {\n        text: \"Submission Data\"\n      },\n      data: [{\n        // Change type to \"doughnut\", \"line\", \"splineArea\", etc.\n        type: \"doughnut\",\n        dataPoints: data\n      }]\n    };\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"groups-page-content-main-current-individualDisplay-full-section-indiv-full-content1-contentadmin-chart\",\n      children: /*#__PURE__*/_jsxDEV(CanvasJSChart, {\n        options: options\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 13\n    }, this);\n  };\n\n  const decimalToTime = decimal => {\n    return `${Math.floor(decimal) > 12 ? Math.floor(decimal) - 12 : Math.floor(decimal)}:${decimal % 1 !== 0 ? \"30\" : \"00\"}${decimal < 12 ? \" am\" : \" pm\"}`;\n  };\n\n  const handleCreateMeetingSlots = () => {\n    const mostPopularSections = [];\n    let maximum = -1;\n\n    while (true) {\n      const max = [...submissionsMap.entries()].reduce((a, e) => e[1] > a[1] ? e : a);\n\n      if (maximum === -1 || max[1] >= maximum * 0.85) {\n        maximum = max[1];\n        mostPopularSections.push(max[0]);\n        submissionsMap.delete(max[0]);\n      } else break;\n    }\n\n    const middleTime = startTime < endTime ? (startTime + endTime) / 2 : (startTime + (endTime + 24 - startTime) / 2) % 24;\n    const ans = [];\n\n    for (let section of mostPopularSections) {\n      const char = section.charAt(section.length - 1);\n      section = section.substring(0, section.length - 1);\n      let center = startTime < middleTime ? (startTime + middleTime) / 2 : (startTime + (middleTime + 24 - startTime) / 2) % 24;\n      if (char === \"B\") center = middleTime < endTime ? (middleTime + endTime) / 2 : (middleTime + (endTime + 24 - middleTime) / 2) % 24;\n      ans.push(`${section}-${decimalToTime(center)}~${decimalToTime(center + details.duration)}`);\n    }\n\n    return ans;\n  };\n\n  const selectMeetingSlot = slot => {\n    var config = {\n      method: \"post\",\n      url: \"http://localhost:5000/api/meetings/selectSlot\",\n      headers: {\n        \"Content-type\": \"application/json\"\n      },\n      data: {\n        meetingId: details._id,\n        selectedSlot: slot\n      }\n    };\n    axios(config).then(res => {\n      console.log(res);\n      props.rerender(prevRender => !prevRender);\n    }).catch(err => {\n      console.log(err);\n    });\n  };\n\n  const displayMeetingSlots = () => {\n    const slots = handleCreateMeetingSlots();\n    return slots.map(slot => {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"groups-page-content-main-current-individualDisplay-full-section-indiv-full-content1-contentadmin-indivcreatedSlots\",\n        children: [slot, /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: selectMeetingSlot,\n          children: \"Select (Final)\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 160,\n          columnNumber: 21\n        }, this)]\n      }, slot, true, {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 17\n      }, this);\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"groups-page-content-main-current-individualDisplay-full-section-indiv-\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"groups-page-content-main-current-individualDisplay-full-section-indiv-full\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"groups-page-content-main-current-individualDisplay-full-section-indiv-full-content1\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"groups-page-content-main-current-individualDisplay-full-section-indiv-full-content1-header\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            children: [`Member availabilities from ${startDate.toLocaleDateString()} to ${endDate.toLocaleDateString()}: `, /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 172,\n              columnNumber: 130\n            }, this), `between \n                                ${decimalToTime(startTime)} and \n                                ${decimalToTime(endTime)}\n                                for ${props.meeting.duration} hour`]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 171,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => setShowData(prevShowData => !prevShowData),\n            children: showData ? \"Generate meeting slots\" : \"View submission data\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 179,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 170,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"groups-page-content-main-current-individualDisplay-full-section-indiv-full-content1-contentadmin\",\n          children: showData ? slotSubmissionDisplay() : displayMeetingSlots()\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 183,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 169,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"groups-page-content-main-current-individualDisplay-full-section-indiv-full-content2\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Members who have submitted:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 188,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"groups-page-content-main-current-individualDisplay-full-section-indiv-full-content2-section\",\n          children: details.haveUploaded.length > 0 ? createUsersDisplay(true) : /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"No members have submitted yet\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 190,\n            columnNumber: 87\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 189,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Members who haven't submitted:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 192,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"groups-page-content-main-current-individualDisplay-full-section-indiv-full-content2-section\",\n          children: details.haveNotUploaded.length > 0 ? createUsersDisplay(false) : /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"All members have submitted\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 194,\n            columnNumber: 91\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 193,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 187,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 167,\n    columnNumber: 9\n  }, this);\n};\n\n_s(IndivMeetingAdmin, \"bLqmaPCHnTvuoAj67Z1n9Zg+5c0=\");\n\n_c = IndivMeetingAdmin;\nexport default IndivMeetingAdmin;\n\nvar _c;\n\n$RefreshReg$(_c, \"IndivMeetingAdmin\");","map":{"version":3,"names":["useState","CanvasJSReact","axios","IndivMeetingAdmin","props","CanvasJS","CanvasJSChart","details","meeting","startDate","Date","range","split","replaceAll","endDate","startString","timeRangeStart","endString","timeRangeEnd","startTime","parseInt","endTime","showData","setShowData","slotToTime","slot","time","date","setDate","getDate","setTime","getTime","fetchSubmission","submissionMap","Map","current","set","toLocaleDateString","substring","lastIndexOf","middleTime","allSlots","uploads","haveUploaded","upload","slots","push","dateString","getHours","get","submissionsMap","createUsersDisplay","uploaded","usersList","haveNotUploaded","map","user","email","slotSubmissionDisplay","data","submission","value","charAt","length","decimalToTime","label","y","options","title","text","type","dataPoints","decimal","Math","floor","handleCreateMeetingSlots","mostPopularSections","maximum","max","entries","reduce","a","e","delete","ans","section","char","center","duration","selectMeetingSlot","config","method","url","headers","meetingId","_id","selectedSlot","then","res","console","log","rerender","prevRender","catch","err","displayMeetingSlots","prevShowData"],"sources":["C:/Users/richk/Documents/GitHub/LetsMeet/client/src/user/home/groups/currentGroups/meetings/indivMeetingAdmin.js"],"sourcesContent":["import { useState } from 'react';\nimport CanvasJSReact from \"./canvasjs-3.7/canvasjs.react\"\nimport axios from 'axios';\n\nconst IndivMeetingAdmin=(props)=>{\n    var CanvasJS = CanvasJSReact.CanvasJS;\n    var CanvasJSChart = CanvasJSReact.CanvasJSChart;\n    const details = props.meeting\n    const startDate = new Date(props.meeting.range[0].split(\"T\")[0].replaceAll('-','/'))\n    const endDate = new Date(props.meeting.range[1].split(\"T\")[0].replaceAll('-','/'))\n\n    const startString = props.meeting.timeRangeStart.split(\":\")\n    const endString = props.meeting.timeRangeEnd.split(\":\")\n    const startTime = parseInt(startString[0])+ (startString[1]!==\"0\" && 0.5)\n    const endTime = parseInt(endString[0])+ (endString[1]!==\"0\" && 0.5)\n    \n    const [showData,setShowData] = useState(true)\n\n    const slotToTime=(slot)=>{\n        const time = slot.split(\"-\")\n        time[0] = parseInt(time[0])+startTime*2\n        time[1] = parseInt(time[1])\n        const date = new Date(startDate)\n        date.setDate(date.getDate()+time[1])\n        date.setTime(date.getTime()+(time[0]*30*60*1000))\n        return date\n    }\n\n    const fetchSubmission=()=>{\n        const submissionMap = new Map()\n        let current = new Date(startDate)\n        while(current.getTime()<=endDate.getTime()){\n            submissionMap.set(`${current.toLocaleDateString().substring(0,current.toLocaleDateString().lastIndexOf(\"/\"))}A`,0)\n            submissionMap.set(`${current.toLocaleDateString().substring(0,current.toLocaleDateString().lastIndexOf(\"/\"))}B`,0)\n            current.setDate(current.getDate()+1)\n        }\n        const middleTime = startTime<endTime ? (startTime+endTime)/2 : (startTime+(endTime+24-startTime)/2)%24\n        \n        const allSlots = []\n        const uploads = (details.haveUploaded)\n        for(const upload of uploads){\n            for(const slot of upload.slots)\n                allSlots.push(slotToTime(slot))\n        }\n\n        for(const date of allSlots){\n            let dateString = `${date.toLocaleDateString().substring(0,date.toLocaleDateString().lastIndexOf(\"/\"))}`\n            if(date.getHours()<middleTime)\n                submissionMap.set(`${dateString}A`,submissionMap.get(`${dateString}A`)+1)\n            else\n                submissionMap.set(`${dateString}B`,submissionMap.get(`${dateString}B`)+1)\n        }\n        return submissionMap\n        \n    }\n    const submissionsMap = fetchSubmission()\n    \n    const createUsersDisplay=(uploaded)=>{\n        const usersList = uploaded ? props.meeting.haveUploaded : props.meeting.haveNotUploaded\n        return usersList.map(user=>{\n            const email = user.user ? user.user : user\n            return(\n                <div key={email}>\n                    {email}\n                </div>\n            )\n        })\n    }\n    const slotSubmissionDisplay=()=>{\n        const middleTime = startTime<endTime ? (startTime+endTime)/2 : (startTime+(endTime+24-startTime)/2)%24\n        const data = []\n        for(const submission of submissionsMap){\n            const value = (submission[0].charAt(submission[0].length-1))\n            submission[0] = submission[0].substring(0,submission[0].length-1)\n            const slot = value===\"A\" ? submission[0]+` -- ${decimalToTime(startTime)}~${decimalToTime(middleTime)}` : submission[0]+` -- ${decimalToTime(middleTime)}~${decimalToTime(endTime)}`\n            data.push({\n                label: slot,\n                y: submission[1]\n            })\n        }\n        const options = {\n\t\t\ttitle: {\n\t\t\t\ttext: \"Submission Data\"\n\t\t\t},\n\t\t\tdata: [\n                {\n                    // Change type to \"doughnut\", \"line\", \"splineArea\", etc.\n                    type: \"doughnut\",\n                    dataPoints: data\n                }\n\t\t\t]\n\t\t}\n        return(\n            <div className='groups-page-content-main-current-individualDisplay-full-section-indiv-full-content1-contentadmin-chart'>\n                <CanvasJSChart options = {options}/>\n            </div>\n        )\n    }\n\n    const decimalToTime=(decimal)=>{\n        return `${Math.floor(decimal)>12 ? Math.floor(decimal)-12:Math.floor(decimal)}:${decimal%1!==0 ? \"30\" : \"00\"}${decimal<12 ? \" am\" : \" pm\"}`\n    }\n\n    const handleCreateMeetingSlots=()=>{\n        const mostPopularSections = []\n        let maximum=-1\n        while(true){\n            const max = ([...submissionsMap.entries()].reduce((a, e ) => e[1] > a[1] ? e : a))\n            if(maximum===-1 || max[1]>=maximum*0.85){\n                maximum = max[1]\n                mostPopularSections.push(max[0])\n                submissionsMap.delete(max[0])\n            }\n            else\n                break\n        }\n        const middleTime = startTime<endTime ? (startTime+endTime)/2 : (startTime+(endTime+24-startTime)/2)%24\n\n        const ans = []\n        for(let section of mostPopularSections){\n            const char = (section.charAt(section.length-1))\n            section = section.substring(0,section.length-1)\n            let center = startTime<middleTime ? (startTime+middleTime)/2 : (startTime+(middleTime+24-startTime)/2)%24\n            if(char===\"B\")\n                center = middleTime<endTime ? (middleTime+endTime)/2 : (middleTime+(endTime+24-middleTime)/2)%24\n            ans.push(`${section}-${decimalToTime(center)}~${decimalToTime(center+details.duration)}`)\n        }\n        return ans\n    }\n    \n    const selectMeetingSlot=(slot)=>{\n        var config = {\n            method:\"post\",\n            url:\"http://localhost:5000/api/meetings/selectSlot\",\n            headers:{\n                \"Content-type\":\"application/json\"\n            },\n            data:{\n                meetingId:details._id,\n                selectedSlot:slot\n            }\n        }\n        axios(config)\n        .then(res=>{\n            console.log(res)\n            props.rerender(prevRender=>!prevRender)\n        })\n        .catch(err=>{\n            console.log(err)\n        })\n    }\n\n    const displayMeetingSlots=()=>{\n        const slots = handleCreateMeetingSlots()\n        return slots.map(slot=>{\n            return(\n                <div className='groups-page-content-main-current-individualDisplay-full-section-indiv-full-content1-contentadmin-indivcreatedSlots' \n                    key={slot}>\n                    {slot}\n                    <button onClick={selectMeetingSlot}>{\"Select (Final)\"}</button>\n                </div>\n            )\n        })\n    }\n\n    return(\n        <div className='groups-page-content-main-current-individualDisplay-full-section-indiv-'>\n            <div className='groups-page-content-main-current-individualDisplay-full-section-indiv-full'>\n                <div className='groups-page-content-main-current-individualDisplay-full-section-indiv-full-content1'>\n                    <div className='groups-page-content-main-current-individualDisplay-full-section-indiv-full-content1-header'>\n                        <p>\n                            {`Member availabilities from ${startDate.toLocaleDateString()} to ${endDate.toLocaleDateString()}: `}<br></br>\n                            {`between \n                                ${decimalToTime(startTime)} and \n                                ${decimalToTime(endTime)}\n                                for ${props.meeting.duration} hour`\n                            }\n                        </p>\n                        <button onClick={()=>setShowData(prevShowData=>!prevShowData)}>\n                            {showData ? \"Generate meeting slots\" : \"View submission data\"}\n                        </button>\n                    </div>\n                    <div className='groups-page-content-main-current-individualDisplay-full-section-indiv-full-content1-contentadmin'>\n                        {showData ? slotSubmissionDisplay() : displayMeetingSlots()}\n                    </div>\n                </div>\n                <div className='groups-page-content-main-current-individualDisplay-full-section-indiv-full-content2'>\n                    <p>Members who have submitted:</p>\n                    <div className='groups-page-content-main-current-individualDisplay-full-section-indiv-full-content2-section'>\n                        {details.haveUploaded.length > 0 ? createUsersDisplay(true) : <p>No members have submitted yet</p>}\n                    </div>                                    \n                    <p>Members who haven't submitted:</p>\n                    <div className='groups-page-content-main-current-individualDisplay-full-section-indiv-full-content2-section'>\n                        {details.haveNotUploaded.length > 0 ? createUsersDisplay(false) : <p>All members have submitted</p>}\n                    </div>    \n                </div>\n            </div>\n        </div>\n    )\n}\n\nexport default IndivMeetingAdmin"],"mappings":"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"},"metadata":{},"sourceType":"module"}